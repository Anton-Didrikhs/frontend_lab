(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[973],{5810:(e,t,o)=>{Promise.resolve().then(o.bind(o,1001))},1001:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c});var s=o(5155),n=o(2115),i=o(6046),r=o(399),a=o(1746),l=o(7058);function c(e){let{params:t}=e,{id:o}=t;(0,r.xI)();let c=(0,i.useRouter)(),[d,u]=(0,n.useState)(""),[m,p]=(0,n.useState)([]),[x,g]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,l.x7)((0,l.H9)(a.db,"quizzes",o));if(e.exists()){u(e.data().title);let t=(await (0,l.GG)((0,l.rJ)(a.db,"quizzes",o,"questions"))).docs.map(e=>({id:e.id,...e.data()}));p(t)}else g("Quiz not found.")}catch(e){g("Error fetching quiz."),console.error("Error fetching quiz:",e)}})()},[o]);let h=e=>{let t=[...m];t.splice(e,1),p(t)},b=(e,t,o)=>{let s=[...m];s[e][t]=o,p(s)},f=(e,t,o,s)=>{let n=[...m];n[e].options[t][o]=s,p(n)},y=(e,t)=>{let o=[...m];o[e].correctAnswer=t,p(o)},v=(e,t)=>{let o=[...m],s=o[e].correctAnswer||[];s.includes(t)?o[e].correctAnswer=s.filter(e=>e!==t):o[e].correctAnswer=[...s,t],p(o)},j=e=>{let t=[...m];"matching"===t[e].type?(t[e].options.push({pair1:"",pair2Options:[]}),t[e].correctAnswer=t[e].correctAnswer||[]):t[e].options.push({text:""}),p(t)},w=(e,t)=>{let o=[...m];o[e].options.splice(t,1),p(o)},N=(e,t)=>{let o=[...m];o[e].options[t].pair2Options.push(""),p(o)},k=(e,t,o,s)=>{let n=[...m];n[e].options[t].pair2Options[o]=s,p(n)},C=(e,t,o)=>{let s=[...m];s[e].correctAnswer[t]=o,p(s)},z=async()=>{try{await (0,l.mZ)((0,l.H9)(a.db,"quizzes",o),{title:d});let e=(0,l.rJ)(a.db,"quizzes",o,"questions");for(let t of m)t.id?await (0,l.mZ)((0,l.H9)(e,t.id),t):await (0,l.gS)(e,t);c.push("/quiz/edit")}catch(e){g("Error saving quiz."),console.error("Error saving quiz:",e)}};return(0,s.jsx)("section",{className:"bg-white",children:(0,s.jsx)("div",{className:"lg:grid lg:min-h-screen lg:grid-cols-12",children:(0,s.jsx)("main",{className:"flex items-center justify-center p-8 sm:p-12 lg:col-span-12",children:(0,s.jsxs)("div",{className:"max-w-xl lg:max-w-3xl",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 sm:text-3xl",children:"Edit Quiz"}),x&&(0,s.jsx)("p",{className:"mt-4 text-red-600",children:x}),(0,s.jsxs)("div",{className:"mt-8 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Quiz Title"}),(0,s.jsx)("input",{id:"title",name:"title",type:"text",value:d,onChange:e=>u(e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),m.map((e,t)=>(0,s.jsxs)("div",{className:"border p-4 rounded-md shadow-sm",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Question"}),(0,s.jsx)("input",{type:"text",value:e.question,onChange:e=>b(t,"question",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mt-4",children:"Type"}),(0,s.jsxs)("select",{value:e.type,onChange:e=>b(t,"type",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,s.jsx)("option",{value:"single",children:"Single Choice"}),(0,s.jsx)("option",{value:"multiple",children:"Multiple Choice"}),(0,s.jsx)("option",{value:"list",children:"List"}),(0,s.jsx)("option",{value:"matching",children:"Matching"})]}),"matching"===e.type?e.options.map((e,o)=>(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pair 1"}),(0,s.jsx)("input",{type:"text",value:e.pair1,onChange:e=>f(t,o,"pair1",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mt-2",children:"Pair 2 Options"}),e.pair2Options.map((e,n)=>(0,s.jsx)("input",{type:"text",value:e,onChange:e=>k(t,o,n,e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},n)),(0,s.jsx)("button",{type:"button",onClick:()=>N(t,o),className:"inline-block rounded-sm border border-indigo-600 bg-indigo-600 px-12 py-3 text-sm font-medium text-white hover:bg-transparent hover:text-indigo-600 focus:ring-3 focus:outline-hidden",children:"Add Pair Option"})]},o)):e.options.map((e,o)=>(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Option"}),(0,s.jsx)("input",{type:"text",value:e.text,onChange:e=>f(t,o,"text",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"}),(0,s.jsx)("button",{type:"button",onClick:()=>w(t,o),className:"inline-block rounded-sm border border-indigo-600 bg-indigo-600 px-12 py-3 text-sm font-medium text-white hover:bg-transparent hover:text-indigo-600 focus:ring-3 focus:outline-hidden",children:"Remove Option"})]},o)),(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mt-4",children:"Correct Answer"}),"single"===e.type||"list"===e.type?e.options.map((o,n)=>(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("input",{type:"radio",id:"correct-".concat(t,"-").concat(n),name:"correct-".concat(t),value:o.text,checked:e.correctAnswer===o.text,onChange:e=>y(t,e.target.value)}),(0,s.jsx)("label",{htmlFor:"correct-".concat(t,"-").concat(n),className:"ml-2",children:o.text})]},n)):"multiple"===e.type?e.options.map((o,n)=>{var i;return(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("input",{type:"checkbox",class:"size-4 rounded-sm border-gray-300",id:"correct-".concat(t,"-").concat(n),name:"correct-".concat(t),value:o.text,checked:null===(i=e.correctAnswer)||void 0===i?void 0:i.includes(o.text),onChange:()=>v(t,o.text)}),(0,s.jsx)("label",{htmlFor:"correct-".concat(t,"-").concat(n),className:"ml-2",children:o.text})]},n)}):"matching"===e.type?e.options.map((o,n)=>(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Correct Pair for ",o.pair1]}),(0,s.jsxs)("select",{value:e.correctAnswer[n]||"",onChange:e=>C(t,n,e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select a match"}),o.pair2Options.map((e,t)=>(0,s.jsx)("option",{value:e,children:e},t))]})]},n)):null,(0,s.jsx)("button",{type:"button",onClick:()=>j(t),className:"inline-block rounded-sm border border-indigo-600 bg-indigo-600 px-12 py-3 text-sm font-medium text-white hover:bg-transparent hover:text-indigo-600 focus:ring-3 focus:outline-hidden",children:"Add Option"}),(0,s.jsx)("button",{type:"button",onClick:()=>h(t),className:"inline-block rounded-sm border border-indigo-600 bg-indigo-600 px-12 py-3 text-sm font-medium text-white hover:bg-transparent hover:text-indigo-600 focus:ring-3 focus:outline-hidden",children:"Remove Question"})]},t)),(0,s.jsx)("button",{type:"button",onClick:()=>{p([...m,{question:"",options:[],type:"single",correctAnswer:""}])},className:"inline-block rounded-sm border border-indigo-600 bg-indigo-600 px-12 py-3 text-sm font-medium text-white hover:bg-transparent hover:text-indigo-600 focus:ring-3 focus:outline-hidden",children:"Add Question"}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:z,className:"inline-block rounded-sm border border-indigo-600 bg-indigo-600 px-12 py-3 text-sm font-medium text-white hover:bg-transparent hover:text-indigo-600 focus:ring-3 focus:outline-hidden",children:"Save Changes"})})]})]})})})})}},1746:(e,t,o)=>{"use strict";o.d(t,{db:()=>l,j:()=>a});var s=o(9904),n=o(399);o(2115);var i=o(7058);let r=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)({apiKey:"AIzaSyC4alDMQyTE59y2R8moUthpfHb1xh5t1fk",authDomain:"frontendlaboratoryapp-e4d02.firebaseapp.com",projectId:"frontendlaboratoryapp-e4d02",storageBucket:"frontendlaboratoryapp-e4d02.firebasestorage.app",messagingSenderId:"235421501756",appId:"1:235421501756:web:39513633b0900ab1077639",measurementId:"G-24PFG7KK3J"}),a=(0,n.xI)(r),l=(0,i.aU)(r)},6046:(e,t,o)=>{"use strict";var s=o(6658);o.o(s,"usePathname")&&o.d(t,{usePathname:function(){return s.usePathname}}),o.o(s,"useRouter")&&o.d(t,{useRouter:function(){return s.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[882,992,734,778,441,517,358],()=>t(5810)),_N_E=e.O()}]);